require File.dirname(__FILE__) + '/../../lib/upload_server.rb'

CHUNK1 = "POST / HTTP/1.1\r\nUser-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8l zlib/1.2.3\r\nHost: localhost:8081\r\nAccept: */*\r\nContent-Length: 3273\r\nExpect: 100-continue\r\nContent-Type: multipart/form-data; boundary=----------------------------c2500fe2445b\r\n\r\n------------------------------c2500fe2445b\r\nContent-Disposition: form-data; name=\"file\"; filename=\"scharf.jpg\"\r\nContent-Type: image/jpeg\r\n\r\n\377\330\377\340\000\020JFIF\000\001\001\001\000\360\000\360\000\000\377\341\000\026Exif\000\000MM\000*\000\000\000\b\000\000\000\000\000\000\377\376\000\023Created with GIMP\377\333\000C\000\002\001\001\001\001\001\002\001\001\001\002\002\002\002\002\004\003\002\002\002\002\005\004\004\003\004\006\005\006\006\006\005\006\006\006\a\t\b\006\a\t\a\006\006\b\v\b\t\n\n\n\n\n\006\b\v\f\v\n\f\t\n\n\n\377\333\000C\001\002\002\002\002\002\002\005\003\003\005\n\a\006\a\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\377\300\000\021\b\000b\000a\003\001\"\000\002\021\001\003\021\001\377\304\000\036\000\000\000\a\001\001\001\001\000\000\000\000\000\000\000\000\000\000\004\005\006\a\b\t\003\001\002\n\377\304\000F\020\000\001\003\003\002\004\003\004\a\004\003\021\000\000\000\000\001\002\003\004\000\005\021\006\a\b\022!1\023\"A\024Q\221\241\025#2a\201\261\321\t\026q\301\027R\360\n\0303CTVcs\222\223\225\243\262\302\322\323\342\377\304\000\e\001\000\001\005\001\001\000\000\000\000\000\000\000\000\000\000\000\004\000\002\003\005\006\001\a\377\304\000&\021\000\002\002\002\002\002\001\003\005\000\000\000\000\000\000\000\001\002\000\003\004\021\005!\02212\023A\221\"3a\321\360\377\332\000\f\003\001\000\002\021\003\021\000?\000\272\261-G\003\245(\307\264v\351JQm}\006SF\235f5\2762\244\3118JFMV\r\307y4M0Za\034\356\250\001\367\232dn^\367\350\335\271\212\267e\312m\305\2419\345\361\000\3056\370\200\336\273u\232\332\3630\\Z\016\017\\g\341\326\263\307\212\035\333\324W\237jM\266d\203\234\375\226\325\327\341Q>MI\362:\206Q\207u\376\204\260[\351\373[\355\233r^\372#OAx\243<\276,\217\320U`\325\037\335\016\356,\e\262\242[\366\376\320\266B\260\\\vY\300\374\rS\255\310\320{\225\255nKvR\344xKY?\340\\\353\370\323&\353\260\267\253s+zL7\212G\332Qm\316\277:U\344\342\267\247\2057\025\223X\331Y\247\3733\373n\357\e\200\353m\335\355V\3469\310\310m\a\247\305un\266w\214m%\270\3144e>\224-\300:\244\000?\352\257\317\\[E\323FLM\316\334^im\253\252\000X\346\371\325\232\341g\211\353\3347\230jD\307\333\345P\004)\302\016h\305\n\335\203+\355\255\253\350\211\274\020\235\205w\214%Bq+J\206AI\256\022\255\231\311\345\252\271\302\207\023n\317b;\022\245\255\304(\000\244\251\314\203V\332\333*\025\372\332\213\2143\224\254g\370T\236\240\255\270\336z\3321\200\212&\365\260u\362\323\242E\264z~TM\333ry\360i\313\356Dw\e?G\177\243\374\250S\217\350\306\377\000\261\241R\352rJq\255\235\274\277*l\356\364\267l\366o\252}M\216BT\244\212\221c[\207O-17\3465\3016\302\314&\220y\221\320\255\031\252\307\362\v\f\254m\304\243;\373\256\244J\234\250M\334g8J\316R\322\rF\266m!\373\323wCrm\267e\205\375\241\340(\203VA\032F\3432\360\353\263-\221\\W\210z\2528>\265#\355.\226\262\"\374\323\027X\226\366\307N\205\264\203Y\374\252E\344\354\352l\370\353\323\030\r.\314\255LpKz\325\260\004\313^\221\230\224\367\372\306\263\201\376\315W^'x(\327\226f$\0064\303\212\0309\004\201\377\000mn\216\235\266\355\364M\034\003r!6\240\234+\vH=\252\274q\025\247\364\r\331\267\320\303\321\23589\tX5V\330\366b~\245m\315]\027W\236<]\b\023\363\203\273\373\027\2544\275\305\303r\322\317))Q\302C\235\276T\310\321\367\205h\275F\205.\302\353 \254sy\262GZ\327\016(\266\263B;\032K\212\262\260\245\f\365\3005Aw3nt\334mT\2051gl'\305\364M^\361\374\223\330\002\264\316\363\034%5m\324\313\005\302&\360\262}\224&;\243\354\3675\246\3744\356S7\213Sp\\mxZGsYq\303\215\202\335\001\370\376\314\337&\024:\004\326\230\360\207\0222\233\214\234\372\017J\320)\f70\227\217\006+\251==\f(d\247\270\367\3219\020\302OoZq=\025 c\024JDpOD\217\215>\006N\342\037\262\375\312\241J\276\002\375\342\205)\3110\306\210\000\035)\251\2740\020l\252Z\2329\r\234\021O\326\241\222\234\005b\232[\227\243\256\032\211\225An\342S\344\350\003c\365\241,$!\207P7`\022\262\307\323\227i\022\035}\270n\257\235d\200\225`\236\277}#\\\254\e\203\vQ2,\373H\354\336ec\3047&\322MX[\026\303\334RFnJ\377\000t?Z\220\366\373h#\332n\210\227qx,\244\0029\220*\216\312V\356\233\251\257\303\310lc\2607\376\376$#v\262\356U\253n\e\220\356\312:\333\213A'7v\275\325Q\267^v\341\310\271\276\334\375\017r\212\220OH\323R\257\310V\262n\375\353HC\321\251\212\374\226\022R\3160p\017j\240\\C\352\275\b$\310dKg\230\223\320\021Cd`c\326w\275\315\017\037\311\345d\257\211R?378\214\273\336\231}\350\237\273\227\325\203\220~\270\325f\274E.\337YrN\231\271\262K\275V\373\244\201W?~\256Z2U\325a\204\241g'$\032\257:\362\337b\221 ;\r\224\363\005z\000~U\026+\322\217\255B9\0347zw\345\271#p\365\0026XZV\221\333!J\353ZG\301\374V\024#+\306Ga\323\232\263_b\355\262\374V|\027\233\t\310\307\324\177\365Z\017\3024K\253&0/\243\035;\260\177\362\255f-\310\311\324\363\036J\227\256\322L\266o2(\234\206\016N\005*E\204\377\000\261\241K\3459H\352\234\217\347_.Bp\216\270\243\324\356T\357Q\e\331\323\375O\235\nV\3661\356\037\023B\2359\324\227\030g\003\251\256\027KC\362\312\\\216P\024\237S\356\245&c`v\256\311c\247c\361\241>\232\221\334!IS\261\e\360#Jee%\030 \365<\247\365\243m\270X\232\2317;\202[m#\252OA\217\304\327\263mw\264KS\220\337\036\0319\345 t\244\331\372rm\316ArtV^=\207\210\3305S\227O\217\251\177\307\337\266\004\306\017\020\247e\246\331\236U\307p C<\244r\273+\256\177\n\316\236#\240\360\364\304\311O#umN9\327\030\231\332\264\207q\266\232U\306\322\373NF\200\204(e9\202\331\307\304U\037\342;a\\\266=*\\clB\316|\342\332\316\177*\244pKh\250\236\205\201v2\323\335\207\362?\251\236;\224\366\205\2175\327,z\322<\204\002yCk\310\357\357\244m\f\306\221\3247\204\2672\364:\367II\305;\370\201\321\327\vT\267[\177\331\244\250\250\220\206\343\241?\225#l^\321\312\276\334\333\226\376\232u*R\272\370}\005I\215\216\035\273\200r\374\200\257\244\356Y\336\0376\233n\337q\216[\272z\221\323\257\351Z\001\303\336\320i\233u\261\271\220\035\v\362t\363u\037*\253\0342\360\362\267$\306.Xd\201\220OZ\276\333m\267\366\335\037`dFa\304\255H\363\005\2578\255F6:\242\211\346\371\271/u\207qA6\324Fd2\205\022\000\351\232.\3640{\032Uy8\364\242nd\034\221G\004Q+\365\270S\330\334\367\320\243T)\321\222Pg\257z\356\224\214u\025\311\224\n9\032\e\257\250\006\307\343Q\bD\370i\b\346\001e#>\363^\334,\345l*M\275\326\371\200\317)U\030\272Y\336\216\333.\251J\t\311\a\370\364\257\246b\245\b\312\237#\247\255\rz\006\035\303\261v\b\"W\236 u\336\272\264Cz-\271\244\344$\200\022I\376U\236\\M\356V\357\207\244)\344+\303$\364\311\310\371V\243n\312\"\275'\301\360\eVr<\315\216\344\032\247|Ih\244JnB\276\214h\367\377\000\024+;\220\241OSq\307\375[\000^\246Xk\373\326\257\270\337\233\270JZ\2729\346J\207q\370\324\371\303V\265n\037\200\035e%]3\365i\242[\211\263\227\v\275\341\311\b\265\024\267\314y0\337\245 \332\264\266\252\320\022\321*\024u\370|\336f\371\a\312\235\206\304\237q\274\256>\207sLx_\334h\356J\214\205\260\222\024\000#\2255e\335q\211,\a\231 \245I\312z\326_l?\0231\264\222\331\027y\0162\367`\205\264\001\025o\366\203\214=+zi\253}\306yZW\201\330dV\232\246\036\"`2+!\311\022vy\003\320Q7\330Q9\t\257,\232\247O\352f\003\366{\213o\0022R\025\346\037\205\ey\266\310\353\371Q\002\bF\275\302^\314\357\270|hQ\257\001\257\353\247\341B\224Z\022Z\265\351\267\237!N$\323\242\327\246[a\277\025\321\312\224\214\222\257AK6\373TX\310\004\240g\035\261]\346Bfts\031n))W~^\364\320\242M\"\255}\272\020\255n;iK(PB\262\332\202I=)\232\356\3560\260@*\a\375Y\251\216N\315h\311o)\3711\234Z\224rIP\353\362\256Gc\364\"\024\034\020\025\3459\307N\277*\343V\215\356\027U\351P\320\022+\260\350\237\351A\265Hv{\214\236`[>\316q\212\367Vp[\246\365;\005W\e\302\226\225\f\250{6\a\347S\225\252\311m\262\307\021\255\261CH\036\211E\020\327R\036\215d[\250\222\342\a)\004$\001\237\225\016\330X\255\331]\302\227\227\315B\005m\257\304\242\273\303\302\346\326iY\0176\226\322\277\v8\362c\365\252\243\276\266M\023`*j\337ik\311\2372\325\237\345V\363\211\326u\024\351/H\266<\372\373\345!C\267\302\251\016\356\350\215qy\271\250*\034\227\023\315\216U\021\327\340(f\252\252\376\v\251;e\344\344~\345\204\310r\341f\221\252n.K\212\317 B\260\217\017\320~\002\236{kf\334+,\366\335\204\343\256\266\223\236U\016\264\366\332\276\037\265[\262P\354\333J\202\026z\345'\245X\335\273\341\245\306YK\353\210\216\303\2705-U\2260;\031\a\336E\332\017s7\223M\311L\213t99On\\~\265.i\3762\367\022\310\2247\255\266\266|\366\017\332\221\001)\016\247\357\306p~F\244\2557\303\323\f\204\027a'\257|\005\177oJY\271l]\262*G\217m\372\274\020\242\227\027\323\241\367Q\252\201D\021\202\264a\177\177&\210\377\00015\227\374\021\257\375\324*N\376\2024?\371\037\374\267\350S\244_HK\213^\247\355\n\024)E>\350+\261\376\024(R\212s\246\026\370H\220\325\235a\247\326\221\341\366J\210\241B\232\337\030\345\371J\201\270\363%\271%\300\344\247\025\324\375\245\223\357\250\332\023MH\274\200\373I_\\\371\323\237Z\024(o\274,|d\335\267\226\353x\202\331\020\031\316\a_\b}\337uH\3666YK(\ti }\311\241B\212X9\367\0366\326\321\341\017 \355\356\245g\030eqO;)=Ot\212\024*S\352r$\344\373\315\n\024*8\247\377\331\r\n------------------------------c2500fe2445b--\r\n"

describe UploadServer do
  it "should close connection" do
    
  end
end